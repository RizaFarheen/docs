---
sidebar_position: 1
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Creating Task Definitions

Task definitions register tasks in Conductor. This API is used to create task definitions in Orkes Conductor.

## Input Payload

| Parameter                                          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| -------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| name                                               | A unique identifier for the task. This field is mandatory.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| description                                        | A brief description of the task. This field is optional.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| retryCount                                         | The number of retries to attempt when a task fails. The default value is 3.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| retryDelaySeconds                                  | The time (in seconds) to wait before each retry occurs. The default value is 60.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| retryLogic                                         | The policy that determines when to schedule each retry. Supported values: It can take the following values:<ul><li>**FIXED** - Reschedules the task after the given duration=`retryDelaySeconds`.</li><li>**LINEAR_BACKOFF** -  Reschedules occur with a delay that increases linearly based on the backoff scale factor and attempt number=`retryDelaySeconds` x `backoffScaleFactor` x `attemptNumber`.</li><li>**EXPONENTIAL_BACKOFF** - Reschedules the task after the given duration=`retryDelaySeconds` x (`backoffScaleFactor` ^ `attemptNumber`).</li></ul>  |
| backOffScaleFactor                                 | The value to be multiplied with `retryDelaySeconds` in order to determine the interval for retry.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| rateLimitPerFrequency | The maximum number of task executions that can be scheduled in a given duration. | 
| rateLimitFrequencyInSeconds | The duration, in seconds, specified for the rate limit. <br/><br/>For example, letâ€™s set **rateLimitFrequencyInSeconds=5**, and **rateLimitPerFrequency=12**. This means our frequency window is 5 seconds in duration, and for each frequency window, the Conductor would only give 12 tasks to workers. So, in a given minute, the Conductor would only give 12*(60/5) = 144 tasks to workers, irrespective of the number of workers polling for the task.<br/>Unlike **concurrentExecLimit**, rate limiting doesn't consider the tasks already in progress or a terminal state. Even if all the previous tasks are executed within 1 sec or would take a few days, the new tasks are still given to workers at configured frequency, 144 tasks per minute in the above example. |
| concurrentExecLimit                                | The number of task executions that can be scheduled concurrently. <br/><br/>For example, if you have 1000 task executions waiting in the queue and 1000 workers polling this queue for tasks, but if you have set _concurrentExecLimit_ to 10, only 10 tasks would be given to workers (which would lead to starvation). If any of the workers finish execution, a new task(s) will be removed from the queue while still keeping the current execution count to 10.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| responseTimeoutSeconds                             | Time (in seconds) to wait before rescheduling the task if its status is not updated within this period. The default value is 600.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| timeOutSeconds                                     | Time (in seconds), after which the task is marked as **TIMED_OUT** if it has not reached a terminal state after transitioning to **IN_PROGRESS** status for the first time. No timeout occurs if the value is set to 0.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| pollTimeoutSeconds                                 | Time (in seconds), after which the task is marked as **TIMED_OUT** if not polled by a worker. No timeout occurs if the value is set to 0. |
| timeoutPolicy                                      | The policy for how the Conductor server should handle the timeout. Supported values:<ul><li>**RETRY** - Retries the task again.</li><li>**TIME_OUT_WF** - The task is marked as TIMED_OUT and terminated, which also terminates the workflow as TIMED_OUT.</li><li>**ALERT_ONLY** - A counter is registered and an alert is sent. No further action is taken.</li></ul>To create a task that never times out, set *timeoutSeconds* and *pollTimeoutSeconds* to 0.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| enforceSchema | Set to `true` to enforce task inputs/outputs for all instances of the task. By default, the value is set to `false`. |
| inputSchema | If _enforceSchema_ is set to `true`, select a schema (and version) to be used as input schema for the task definition. Learn more about [creating and using schema](https://orkes.io/content/developer-guides/schema-validation). |
| outputSchema | If _enforceSchema_ is set to `true`, select a schema (and version) to be used as output schema for the task definition. Learn more about [creating and using schema](https://orkes.io/content/developer-guides/schema-validation). |
| inputTemplate                                      | Input templates are defined as part of task definitions. It acts as default input to the task while adding to the workflow. It can be overridden by values provided in workflow definitions.<br/>**Note**: You cannot view the input templates in the workflow definition JSON as they are part of only task definitions. However, when clicking the task, you can [view the input templates supplied from the UI](https://orkes.io/content/developer-guides/passing-inputs-to-task-in-conductor#task-input-templates).|
| inputKeys                                          | An array of keys representing the expected input for the task.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| outputKeys                                         | An array of keys representing the expected output from the task.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ownerEmail                                         | This field will be auto-populated with the user's email address.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

## API Endpoint
```
POST /api/metadata/taskdefs
```

## Client SDK Methods

<Tabs>
<TabItem value="Java" label="Java">

```java
void OrkesMetadataClient.registerTaskDefs(List<TaskDef> taskDefs) throws ApiException
```

</TabItem>
<TabItem value="Go" label="Go">

```go
func (a *MetadataResourceApiService) RegisterTaskDef(ctx context.Context, body []model.TaskDef) (*http.Response, error)
```

</TabItem>
<TabItem value="Python" label="Python">

```python
MetadataResourceApi.register_task_def(body, **kwargs)
```

</TabItem>
<TabItem value="CSharp" label="C#">

```csharp
Object MetadataResourceApi.RegisterTaskDef(List<TaskDef> body)
```

</TabItem>
<TabItem value="JavaScript" label="JavaScript">

```javascript
MetadataResourceService.registerTaskDef(requestBody: Array<TaskDef>): CancelablePromise<any>
```

</TabItem>
<TabItem value="Typescript" label="Typescript">

```typescript
MetadataResourceService.registerTaskDef(requestBody: Array<TaskDef>): CancelablePromise<any>
```

</TabItem>
<TabItem value="Clojure" label="Clojure">

```clojure
(metadata/register-tasks options [tasks])
```

</TabItem>
</Tabs>
